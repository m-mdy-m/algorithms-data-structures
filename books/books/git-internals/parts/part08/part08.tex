\part{File System and I/O}
\label{part:filesystem}

\begin{partintro}
Git interacts with the file system constantly. Reading, writing, watching for changes. How it does this efficiently and correctly.
\end{partintro}

\chapter{File I/O Patterns}
% Read/write wrappers
% Atomic writes
% Temporary files
% Rename atomicity
% Error handling
% Recovery strategies

\chapter{Directory Traversal}
% Recursive descent
% Ignoring files (.gitignore)
% Pattern matching
% Efficiency optimizations
% Parallel traversal
% Sparse checkout

\chapter{File System Watching}
% FSMonitor integration
% Change detection
% Polling vs events
% Platform differences
% Watchman integration
% Performance impact

\chapter{Working Tree State}
% Stat information
% Modification detection
% Race conditions
% Timestamp precision
% Inode reuse
% Why stat is not enough

\chapter{Lock Files}
% Preventing concurrent access
% Lock file protocol
% Cleanup on failure
% Deadlock avoidance
% Per-reference locks
% Index locking

\chapter{Temporary Files and Cleanup}
% tmpfile usage
% Cleanup handlers
% Signal safety
% Atexit handlers
% Emergency cleanup
% Disk space management