%----------------------------------------------
% Custom Commands for Special Pages
%----------------------------------------------

% Command for part pages (if using \part)
\newcommand{\partpage}{
	\thispagestyle{empty}
	\cleardoublepage
}

% Command for appendix pages
\newcommand{\appendixpage}{
	\thispagestyle{chapter}
}

%----------------------------------------------
% Page Number Formatting Enhancements
%----------------------------------------------

\renewcommand{\thepage}{\arabic{page}}
\newcommand{\frontmatterpagenumber}{
	\renewcommand{\thepage}{\roman{page}}
}

\newcommand{\mainmatterpagenumber}{
	\renewcommand{\thepage}{\arabic{page}}
}

%----------------------------------------------
% Header Content Customization
%----------------------------------------------

% Customize chapter and section marks
\renewcommand{\chaptermark}[1]{
	\markboth{\textsc{Chapter \thechapter:\ #1}}{}
}

\renewcommand{\sectionmark}[1]{
	\markright{\textsc{\thesection\ #1}}
}


% spacing parameters 
\newcommand{\CoverFirstGap}{0.8em}
\newcommand{\CoverOtherGap}{0.6em}

\newcommand{\SpacedCoverTitle}{%
  \begingroup
    \StrLen{\PDFCoverTitle}[\TitleLen]%
    \newcount\c 
    \c=1
    \loop
      \StrChar{\PDFCoverTitle}{\the\c}[\ThisChar]%
      \ifnum\c=1
        \ThisChar\hspace{\CoverFirstGap}%
      \else
        \ThisChar\hspace{\CoverOtherGap}%
      \fi
      \advance\c by 1
    \ifnum\c<\numexpr\TitleLen+1\relax
    \repeat
  \endgroup
}

%----------------------------------------------
% COMPLEXITY NOTATION
%----------------------------------------------
\newcommand{\bigO}{\mathcal{O}}
\newcommand{\bigOmega}{\Omega}
\newcommand{\bigTheta}{\Theta}
\newcommand{\littleo}{o}
\newcommand{\littleomega}{\omega}
\newcommand{\softO}{\widetilde{\mathcal{O}}}  % Ã• notation
%----------------------------------------------
% NUMBER SETS
%----------------------------------------------
\newcommand{\Naturals}{\mathbb{N}}
\newcommand{\Integers}{\mathbb{Z}}
\newcommand{\Rationals}{\mathbb{Q}}
\newcommand{\Reals}{\mathbb{R}}
\newcommand{\Complex}{\mathbb{C}}
\newcommand{\Primes}{\mathbb{P}}

%----------------------------------------------
% PROBABILITY AND STATISTICS
%----------------------------------------------
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\Expect}{\mathbb{E}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Std}{\mathrm{Std}}

% Indicator function
\newcommand{\Ind}{\mathbbm{1}}
%----------------------------------------------
% GRAPH THEORY NOTATION
%----------------------------------------------
\newcommand{\Graph}{G}
\newcommand{\Vertices}{V}
\newcommand{\Edges}{E}
\newcommand{\adjacency}[1]{N(#1)}  % Neighborhood of vertex
%----------------------------------------------
% ALGORITHM PSEUDOCODE CUSTOMIZATION
%----------------------------------------------

\algrenewcommand\algorithmicrequire{\textbf{Input:}}
\algrenewcommand\algorithmicensure{\textbf{Output:}}

\algnewcommand\algorithmicto{\textbf{to}}
\algnewcommand\algorithmicdownto{\textbf{downto}}

\algrenewcommand\alglinenumber[1]{\footnotesize\color{textgray}#1:}

%----------------------------------------------
% CODE LISTINGS CONFIGURATION (Minimal Style)
%----------------------------------------------
\lstset{
    % Appearance
    backgroundcolor=\color{codebackground},
    basicstyle=\ttfamily\small\color{textgray},
    keywordstyle=\color{accent}\bfseries,
    commentstyle=\color{green!60!black}\itshape,
    stringstyle=\color{orange!80!black},
    identifierstyle=\color{textgray},
    % Line numbers
    numbers=left,
    numberstyle=\tiny\color{border},
    numbersep=10pt,
    stepnumber=1,
    % Spacing and layout
    tabsize=4,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    breaklines=true,
    breakatwhitespace=false,
    % Frame (minimal)
    frame=leftline,
    framerule=2pt,
    rulecolor=\color{border},
    % Margins
    xleftmargin=15pt,
    xrightmargin=10pt,
    framexleftmargin=12pt,
    % Caption
    captionpos=b,
    % Escape for LaTeX commands inside code
    escapeinside={(*@}{@*)},
    % Literate programming (optional: for special characters)
    literate=
        {->}{$\rightarrow$}{2}
        {<=}{$\leq$}{2}
        {>=}{$\geq$}{2}
        {!=}{$\neq$}{2}
}

% Language-specific settings
\lstdefinestyle{python}{
    language=Python,
    morekeywords={self, True, False, None}
}

\lstdefinestyle{cpp}{
    language=C++,
    morekeywords={nullptr, constexpr, noexcept}
}

\lstdefinestyle{pseudocode}{
    language=,
    morekeywords={procedure, function, input, output, return, if, then, else, elsif, 
                  while, for, do, to, downto, repeat, until, break, continue}
}

%----------------------------------------------
% ALGORITHM ENVIRONMENT STYLING
%----------------------------------------------

\makeatletter
\renewcommand{\ALG@name}{Algorithm}
\makeatother

\usepackage{caption}
\DeclareCaptionFormat{algformat}{%
    \color{accent}\textbf{#1#2}#3
}
\captionsetup[algorithm]{
    format=algformat,
    labelsep=period,
    font={small},
    skip=8pt
}

%----------------------------------------------
% UTILITY COMMANDS
%----------------------------------------------

\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}
\DeclarePairedDelimiter\norm{\lVert}{\rVert}

\newcommand{\inner}[2]{\langle #1, #2 \rangle}

\newcommand{\set}[1]{\{#1\}}
\newcommand{\setbuilder}[2]{\{#1 \mid #2\}}

%----------------------------------------------
% TEXT FORMATTING SHORTCUTS
%----------------------------------------------

\newcommand{\keyword}[1]{\textcolor{accent}{\textbf{#1}}}
\newcommand{\term}[1]{\textit{#1}}

%----------------------------------------------
% CROSS-REFERENCE SHORTCUTS
%----------------------------------------------

% Algorithm references
\newcommand{\lineref}[1]{line~\ref{#1}}
\newcommand{\linesref}[2]{lines~\ref{#1}--\ref{#2}}

% CUSTOM LISTS
%----------------------------------------------

% Compact itemize
\newenvironment{compactitem}{%
    \begin{itemize}[noitemsep,topsep=3pt,leftmargin=*]
}{%
    \end{itemize}
}

% Compact enumerate
\newenvironment{compactenum}{%
    \begin{enumerate}[noitemsep,topsep=3pt,leftmargin=*]
}{%
    \end{enumerate}
}

%----------------------------------------------
% COMPLEXITY CLASS COMMANDS
%----------------------------------------------

\newcommand{\NP}{\mathsf{NP}}
\newcommand{\coNP}{\mathsf{coNP}}
\newcommand{\NPcomplete}{\mathsf{NP}\text{-}\mathsf{complete}}
\newcommand{\NPhard}{\mathsf{NP}\text{-}\mathsf{hard}}
\newcommand{\PSPACE}{\mathsf{PSPACE}}
\newcommand{\EXPTIME}{\mathsf{EXPTIME}}
\newcommand{\LOGSPACE}{\mathsf{L}}
\newcommand{\NLOGSPACE}{\mathsf{NL}}

%----------------------------------------------
% RECURRENCE RELATION HELPERS
%----------------------------------------------
\newcommand{\recurrence}[1]{\ensuremath{T(#1)}}
\newcommand{\runtime}[1]{\ensuremath{T(#1)}}

%----------------------------------------------
% MATRIX NOTATION
%----------------------------------------------
\newcommand{\transpose}{^{\mathsf{T}}}
\newcommand{\inverse}{^{-1}}
\newcommand{\trace}{\mathrm{tr}}
\newcommand{\rank}{\mathrm{rank}}
\newcommand{\diag}{\mathrm{diag}}

%----------------------------------------------
% COMMON FUNCTIONS
%----------------------------------------------
\renewcommand{\log}{\operatorname{log}}

%----------------------------------------------
% GRAPH ALGORITHM NOTATION
%----------------------------------------------
\newcommand{\dist}{\mathrm{dist}}
\newcommand{\parent}{\mathrm{parent}}
\newcommand{\level}{\mathrm{level}}
\newcommand{\degree}{\mathrm{deg}}

%----------------------------------------------
% AMORTIZED ANALYSIS
%----------------------------------------------
\newcommand{\potential}{\Phi} 
\newcommand{\credit}{c}

%----------------------------------------------
% PROBABILITY DISTRIBUTIONS
%----------------------------------------------
\newcommand{\Uniform}{\mathrm{Uniform}}
\newcommand{\Bernoulli}{\mathrm{Bernoulli}}
\newcommand{\Binomial}{\mathrm{Binomial}}
\newcommand{\Geometric}{\mathrm{Geometric}}
\newcommand{\Poisson}{\mathrm{Poisson}}
\newcommand{\Normal}{\mathcal{N}}
%----------------------------------------------
% COMMON MATHEMATICAL CONSTANTS
%----------------------------------------------
\newcommand{\euler}{\mathrm{e}}
\renewcommand{\phi}{\varphi}

%----------------------------------------------
% COMPLEXITY BOUNDS HELPERS
%----------------------------------------------
\newcommand{\worstcase}[1]{\bigO(#1)}
\newcommand{\bestcase}[1]{\bigOmega(#1)}
\newcommand{\tightbound}[1]{\bigTheta(#1)}

%----------------------------------------------
% ALGORITHM COMPLEXITY STATEMENTS
%----------------------------------------------
\newcommand{\timecomplexity}[1]{\textbf{Time:} $#1$}
\newcommand{\spacecomplexity}[1]{\textbf{Space:} $#1$}

%----------------------------------------------
% PROOF ENVIRONMENTS (Use with amsthm)
%----------------------------------------------
\renewcommand{\qedsymbol}{$\blacksquare$}

\newenvironment{proofsketch}{%
    \begin{proof}[Proof Sketch]
}{%
    \end{proof}
}

%----------------------------------------------
% MARGINAL NOTES (for draft mode)
%----------------------------------------------
\usepackage{marginnote}
\newcommand{\todo}[1]{\marginnote{\color{red}\textbf{TODO:} #1}}

%----------------------------------------------
% SPACING ADJUSTMENTS
%----------------------------------------------

% Theorem spacing
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 2pt
  \thm@postskip=8pt plus 2pt minus 2pt
}
\makeatother